<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="robots" content="all">
		<meta name="description" content="Simple 2D game/app test">
		<meta name="author" content="Keith Taylor, Mint">
		<meta name="keywords" content="Project, Lana, Project Lana, Protogen, app">
		<link rel="canonical" href="https://www.projectlana.app/"/>
		<link rel="icon" href="assets/PL_LOGO.svg"/>
		<title>{'Project Lana'} - app test</title>
		<style>
            body { 
                margin: auto;
                margin-top: 50px; 
                background-color: #1f1f24; 
                display: table;
                color: aquamarine;
            }
        </style>
        <script src="js/pixi.min.js"></script>
	</head>
	<body> 
		<script>
            let app;
            let lana;
            let keys = {};
            let keysDiv;
            window.onload = () => {
                app = new PIXI.Application(
                    {
                        width: 1280,
                        height: 720,
                        backgroundColor: 0xd8cbc7
                    }
                );
                document.body.appendChild(app.view);
                app.loader
                    .add('lana', 'assets/pixi.sprites/lana.png');
                app.loader.onProgress.add(showProgress);
                app.loader.onComplete.add(onLoading);
                app.loader.onError.add(showError);
                app.loader.load();
                // keyboard thingies
                window.addEventListener('keyup', keyTrue);
                window.addEventListener('keydown', keyFalse);
                app.ticker.add(KEYBOARD);
                keysDiv = document.querySelector("#keys");
            }
            showProgress = (l) => {
                console.log(l.progress);
            }
            onLoading = (l) => {
                console.log('Heyyyyy :3');
                // lana the protogen object
                lana = new PIXI.Sprite.from(app.loader.resources.lana.texture);
                lana.x = app.view.width / 2;
                lana.y = app.view.height / 2;
                lana.anchor.set(0.5);
                app.stage.addChild(lana);
            }
            showError = (l) => {
                console.error("Oh noo QwQ: " + l.message);
            }
            keyTrue = (l) => {
                console.log(l.keyCode);
                keys[l.keyCode] = false
            }
            keyFalse = (l) => {
                console.log(l.keyCode);
                keys[l.keyCode] = true
            }
            KEYBOARD = () => {
                keysDiv.innerHTML = JSON.stringify(keys);
                // W key //
                if (keys['87']) {
                    lana.y -= 5;
                }
                // S key //
                if (keys['83']) {
                    lana.y += 5;
                }
                // A key //
                if (keys['65']) {
                    lana.x -= 5;
                }
                // D key //
                if (keys['68']) {
                    lana.x += 5;
                }
            }

        </script>
        <div id="keys"></div>
	</body>
</html>